#### Out of stock products behavior ([#3587](https://github.com/shopsys/shopsys/pull/3587))

-   products with stock quantity 0 or less are now considered sellable
-   main variants stock quantity is now always null, and it's availability is based on it's variants
    -   check `Version20241121094752` migration whether it suits your needs
-   `Shopsys\FrameworkBundle\Model\Product\Elasticsearch\Scope\ProductExportFieldProvider::AVAILABILITY_DISPATCH_TIME` was removed with no replacement
-   `Shopsys\FrameworkBundle\Form\WarningMessageType` was removed, use `Shopsys\FrameworkBundle\Form\MessageType` instead
-   `Shopsys\FrameworkBundle\Model\Product\Availability\ProductAvailabilityFacade::getProductAvailabilityDaysByDomainId()` was renamed to `getProductAvailabilityDaysForFeedsByDomainId()`
-   `Shopsys\FrameworkBundle\Model\Product\Product::getFullnames()` was renamed to `Product::getFullNames()`
-   `Shopsys\FrontendApiBundle\Model\Cart\CartWatcherFacade::checkUnavailableStockQuantityItems()` was removed with no replacement
-   `Shopsys\FrontendApiBundle\Model\Cart\CartWithModificationsResult::addCartItemWithChangedQuantity()` and `addNoLongerAvailableCartItemDueToQuantity()` were removed with no replacement
-   `Shopsys\FrontendApiBundle\Model\Cart\CartWithModificationsResult::$itemModifications` array no longer contains `cartItemsWithChangedQuantity` and `noLongerAvailableCartItemsDueToQuantity` keys
    -   the `cartItemsWithChangedQuantity` and `noLongerAvailableCartItemsDueToQuantity` fields are removed front the FE API (`CartItemModificationsResultDecorator.types.yaml`) as well
-   `Shopsys\FrameworkBundle\Model\Product\Search\FilterQuery::applyDefaultOrdering()` was removed, use `applyOrderingByIdAscending()` instead
    -   the method is used in tests only
-   `Shopsys\ProductFeed\LuigisBoxBundle\Model\FeedItem\LuigisBoxProductFeedItem` class was changed:
    -   `$isAvailable` and `$availableInDays` properties were removed
    -   instead, `$availabilityRank` property was added
    -   `getAvailability()` now always return `1` as all the items are sellable
-   `Shopsys\FrameworkBundle\Model\Cart\CartMigrationFacade` class was removed. If you use FE API, you should use `Shopsys\FrontendApiBundle\Model\Cart\MergeCartFacade` instead. Otherwise, you need to implement your own cart migration logic.
-   `product_available_stores_count_information` field was removed from the Elasticsearch index without replacement
-   [features moved](#movement-of-features-from-project-base-to-packages) from project-base to the packages:
    -   `AvailabilityStatusEnum` API type was moved to the frontend-api package as `AvailabilityStatusEnumDecorator`
    -   `StoreAvailability` API type was moved to the frontend-api package as `StoreAvailabilityDecorator`
    -   `Availability.status` API field was moved to the frontend-api package to `AvailabilityDecorator`
    -   `Product.storeAvailabilities` and `Product.availableStoresCount` API fields were moved to the frontend-api package to `ProductDecorator`
    -   `ProductEntityFieldMapper::getStockQuantity()`, `getStoreAvailabilities()`, and `getAvailableStoresCount()` were moved to the frontend-api package
    -   `ProductArrayFieldMapper::getStoreAvailabilities()` and `getAvailableStoresCount()` were moved to the frontend-api package
    -   `ProductExportFieldProvider::AVAILABLE_STORES_COUNT`, `STORE_AVAILABILITIES_INFORMATION`, and `AVAILABILITY_STATUS` were moved to the frontend-api package
    -   the whole Mergado XML feed implementation was moved from project-base to the new `product-feed-mergado` package
    -   `ProductTranslation::$namePrefix`, `$nameSufix`, and `Product::getFullname()` with all the related logic was moved to the framework package
    -   `ProductTranslation::$nameSufix` was renamed to `$nameSuffix`
    -   `Product::getFullname()` was renamed to `getFullName()`
    -   corresponding API types were moved to the frontend-api package
-   see #project-base-diff to update your project
